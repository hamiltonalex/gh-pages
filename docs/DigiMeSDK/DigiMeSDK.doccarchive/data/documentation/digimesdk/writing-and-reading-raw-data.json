{"abstract":[{"text":"digi.me prides itself in normalizing data from a huge array of sources into common ontologies, however, as a data portability facilitator, we support the flow of data in both directions - from the user to you, and from you back to the user.","type":"text"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/me.digi.sdk.example.library.DigiMeSDK\/documentation\/DigiMeSDK\/Writing-And-Reading-Raw-Data"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/digimesdk\/writing-and-reading-raw-data"]}],"metadata":{"roleHeading":"Article","modules":[{"name":"DigiMeSDK"}],"role":"article","title":"Writing And Reading Raw Data"},"kind":"article","sections":[],"schemaVersion":{"minor":3,"major":0,"patch":0},"hierarchy":{"paths":[["doc:\/\/me.digi.sdk.example.library.DigiMeSDK\/documentation\/DigiMeSDK"]]},"primaryContentSections":[{"kind":"content","content":[{"level":2,"anchor":"overview","text":"Overview","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To differentiate these types of data, we refer to these as follows:"}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Data sources from external services, which is then normalized into differnet ontologies is referred to as "},{"type":"strong","inlineContent":[{"type":"text","text":"mapped"}]},{"type":"text","text":" data."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Data written to a user’s digi.me via this SDK is referred to as ","type":"text"},{"inlineContent":[{"type":"text","text":"raw data"}],"type":"strong"},{"text":".","type":"text"}]}]}],"type":"unorderedList"},{"inlineContent":[{"text":"The digi.me Private Sharing SDK makes it easy to write data to a user’s digi.me and read it back again.","type":"text"}],"type":"paragraph"},{"level":2,"anchor":"Writing-Raw-Data","text":"Writing Raw Data","type":"heading"},{"inlineContent":[{"text":"Before data can be written, you should already have credentials for this user.  If you don’t have any, you will need to authorize the user first. Make sure the contract used is a ","type":"text"},{"inlineContent":[{"text":"WRITE","type":"text"}],"type":"strong"},{"type":"text","text":" contract."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"To write the data, you need to build a ","type":"text"},{"type":"codeVoice","code":"metadata"},{"type":"text","text":" object that describes what data your pushing along with the "},{"type":"codeVoice","code":"Data"},{"text":" representation of your data itself.","type":"text"}]},{"syntax":"swift","code":["\/\/ Obtain the data you wish to post.","let data: Data = ...","","\/\/ All push submissions must be pushed with appropriate metadata. The following is taken from one of the example apps.","let metadata = RawFileMetadataBuilder(mimeType: .applicationJson, accounts: [\"Account1\"])","                .objectTypes([.init(name: \"receipt\")])","                .tags([\"groceries\"])","                .reference([\"Receipt \\(dateFormatter.string(from: Date()))\"])","                .build()","","let credentials = my_stored_credentials","digiMe.write(data: data, metadata: metadata, credentials: credentials) { result in","  switch result {","    case .success(let refreshedCredentials):","        \/\/ Update your stored credentials as these may have changed","        ","    case .failure(let error):","        \/\/ Handle failure","    }","}"],"type":"codeListing"},{"anchor":"Reading-Raw-Data","level":2,"text":"Reading Raw Data","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In order to read data which you have written to user’s digi.me you will need a separate "},{"inlineContent":[{"type":"text","text":"READ"}],"type":"strong"},{"type":"text","text":" contract configured to read raw data. Please "},{"isActive":true,"identifier":"https:\/\/developers.digi.me\/contact-us","type":"reference"},{"type":"text","text":" to discuss this."}]},{"type":"paragraph","inlineContent":[{"text":"Reading raw data is similar to reading mapped data, in that you will need to authorize the user with this contract.  The only difference is that to access the same data space that your write contract has written to, you will also need to pass the credentials for you write contract.  This is because, by default, authorizing a contract creates a new data space - only by linking another contract will those contracts access the same data space.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You will also need to create a separate digi.me instance configured with your read contract."}]},{"syntax":"swift","code":["let writeCredentials = my_write_credentials","","readDigiMe.authorize(linkToContractWithCredentials: writeCredentials) { result in","    switch result {","    case .success(let credentials):","        \/\/ Store these credentials for your read contract","        ","    case.failure(let error):","        \/\/ Handle failure    }","}"],"type":"codeListing"},{"inlineContent":[{"type":"text","text":"Now you are ready to read the data you have written:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let credentials = my_stored_read_credentials","readDigiMe.readAllFiles(credentials: credentials, readOptions: nil) { result in","\tswitch result {","   \tcase .success(let file):","        \/\/ Access data or metadata of file.","        ","   case .failure(let error):","       \/\/ Handle Error","   }","} completion: { result in","    switch result {","    case .success(let (fileList, refreshedCredentials)):","        \/\/ Handle success and update stored credentials as these may have been refreshed.","    case .failure(let error):","        \/\/ Handle failure.","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The returned file’s "},{"type":"codeVoice","code":"metadata"},{"text":" will be a ","type":"text"},{"code":"raw","type":"codeVoice"},{"type":"text","text":" type containing the actual metadata accompanying the data when it was written."}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"NB: Please refer to our Read\/Write example in the ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/digime\/digime-sdk-ios\/tree\/master\/Examples\/DigiMeSDKExample"},{"type":"text","text":" for a working example of this."}],"type":"emphasis"}]}]}],"references":{"https://developers.digi.me/contact-us":{"url":"https:\/\/developers.digi.me\/contact-us","titleInlineContent":[{"type":"text","text":"contact support"}],"type":"link","title":"contact support","identifier":"https:\/\/developers.digi.me\/contact-us"},"doc://me.digi.sdk.example.library.DigiMeSDK/documentation/DigiMeSDK":{"kind":"symbol","title":"DigiMeSDK","abstract":[{"text":"Digi.me - The Private Sharing Platform","type":"text"}],"type":"topic","identifier":"doc:\/\/me.digi.sdk.example.library.DigiMeSDK\/documentation\/DigiMeSDK","role":"collection","url":"\/documentation\/digimesdk"},"https://github.com/digime/digime-sdk-ios/tree/master/Examples/DigiMeSDKExample":{"identifier":"https:\/\/github.com\/digime\/digime-sdk-ios\/tree\/master\/Examples\/DigiMeSDKExample","url":"https:\/\/github.com\/digime\/digime-sdk-ios\/tree\/master\/Examples\/DigiMeSDKExample","title":"Example App","titleInlineContent":[{"type":"text","text":"Example App"}],"type":"link"}}}